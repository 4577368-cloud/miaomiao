import{version as e}from"vue";
/*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var t=function(){return t=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},t.apply(this,arguments)};function n(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),o=0;for(t=0;t<n;t++)for(var i=arguments[t],u=0,c=i.length;u<c;u++,o++)r[o]=i[u];return r}var r,o=Object.prototype.hasOwnProperty,i=function(e){return null==e},u=Array.isArray,c=function(e){var t=Object.create(null);return function(n){return t[n]||(t[n]=e(n))}},a=/\B([A-Z])/g,s=c((function(e){return e.replace(a,"-$1").toLowerCase()})),l=/-(\w)/g,f=c((function(e){return e.replace(l,(function(e,t){return t?t.toUpperCase():""}))})),d=c((function(e){return e.charAt(0).toUpperCase()+e.slice(1)})),p=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;function g(e,t){if(u(e))return e;if(t&&(n=t,r=e,o.call(n,r)))return[e];var n,r,i=[];return e.replace(p,(function(e,t,n,r){return i.push(n?r.replace(/\\(\\)?/g,"$1"):t||e),r})),i}function v(e,t){var n,r=g(t,e);for(n=r.shift();!i(n);){if(null==(e=e[n]))return;n=r.shift()}return e}function m(e){return!!(null==e?void 0:e.getElementById)}function h(e){return m(e)?e.vm:e}function _(e){return m(e)?e.vm.$basePage:e.$page}function E(e){return m(e.$page)?e.$basePage:e.$page}function y(){if("string"==typeof e){var t=e.split(".").map((function(e){return parseInt(e,10)}));if(t.length>=2){var n=t[0],r=t[1];return n>3||3===n&&r>=6}}return!1}function w(e){var t;return e.__wxWebviewId__?e.__wxWebviewId__:e.privateProperties?e.privateProperties.slaveId:E(e)?null===(t=E(e))||void 0===t?void 0:t.id:void 0}function T(e){return e.route||e.uri}function S(e){return e.options||e.$page&&e.$page.options||{}}function P(e){return{id:w(e),path:T(e),query:S(e)}}function b(e){var t=h(function(e){return getCurrentPages().find((function(t){return w(h(t))===e}))}(e));return t&&t.$vm}function x(e,t){return function(e){if(e._$weex)return e._uid;if(e._$id)return e._$id;if(e.uid)return e.uid;var t=function(e){for(var t=e.$parent;t;){if(t._$id)return t;t=t.$parent}}(e);if(!e.$parent)return"-1";var n=e.$vnode,r=n.context;return r&&r!==t&&r._$id?r._$id+";"+t._$id+","+n.data.attrs._i:t._$id+","+n.data.attrs._i}(e)===t}function $(e,t,n){var r,o,i,u,c,a,s,l,f,d,p,g,v;if(void 0===n&&(n=!1),n)if(e.component&&x(e.component,t))v=e.component;else{var m=[];e.children instanceof Array?m=e.children:(null===(o=null===(r=e.component)||void 0===r?void 0:r.subTree)||void 0===o?void 0:o.children)&&(null===(u=null===(i=e.component)||void 0===i?void 0:i.subTree)||void 0===u?void 0:u.children)instanceof Array?m=e.component.subTree.children:(null===(l=null===(s=null===(a=null===(c=e.component)||void 0===c?void 0:c.subTree)||void 0===a?void 0:a.component)||void 0===s?void 0:s.subTree)||void 0===l?void 0:l.children)&&(null===(g=null===(p=null===(d=null===(f=e.component)||void 0===f?void 0:f.subTree)||void 0===d?void 0:d.component)||void 0===p?void 0:p.subTree)||void 0===g?void 0:g.children)instanceof Array&&(m=e.component.subTree.component.subTree.children),m.find((function(e){return v=$(e,t,!0)}))}else e&&(x(e,t)?v=e:e.$children.find((function(e){return v=$(e,t)})));return v}function O(e,t){var n=b(e);if(n)return N(n)?$(n.$.subTree,t,!0):$(n,t)}function I(e,t){var n,r=b(e);if(r&&t){var o=r.$page.getNodeById(t);if(o)return null===(n=UniVueElement.findVmByElement(o))||void 0===n?void 0:n.$}}function M(e,n){var r,o,i=e.$data||e.data;return e.exposed?i=t(t({},i),e.exposed):e.$&&(null===(r=e.$)||void 0===r?void 0:r.exposed)&&(i=t(t({},i),e.$.exposed)),e&&(o=n?v(i,n):Object.assign({},i)),Promise.resolve({data:o})}function C(e){return"[object Object]"===Object.prototype.toString.call(e)}function A(e,t){if(e){var n=N(e);Object.keys(t).forEach((function(r){var o;if(n)if(null!=(null===(o=e.$)||void 0===o?void 0:o.exposed)){var i=e.$.exposed;C(t[r])&&C(i[r])?Object.keys(t[r]).forEach((function(e){i[r]&&(i[r][e]=t[r][e])})):i[r]=t[r]}else{(e.$data||e.data)[r]=t[r]}else e[r]=t[r]}))}return Promise.resolve()}function k(e,t,n){return N(e)&&(e=e.$vm||e.ctx),new Promise((function(o,i){var u,c,a,s;if(!e)return i(r.VM_NOT_EXISTS);if(!e[t]&&!(null===(a=null===(c=e.$)||void 0===c?void 0:c.exposed)||void 0===a?void 0:a[t]))return i(r.METHOD_NOT_EXISTS);var l,f=e[t]?e[t].apply(e,n):null===(s=e.$)||void 0===s?void 0:(u=s.exposed)[t].apply(u,n);!(l=f)||"object"!=typeof l&&"function"!=typeof l||"function"!=typeof l.then?o({result:f}):f.then((function(e){o({result:e})}))}))}function N(e){return!e.$children}!function(e){e.VM_NOT_EXISTS="VM_NOT_EXISTS",e.METHOD_NOT_EXISTS="METHOD_NOT_EXISTS"}(r||(r={}));var q=1,U={};var W=new Map,B=function(e){return new Promise((function(n,r){var o=W.values().next().value;if(o){var i=e.method;if("onOpen"===i)return D(o,n);if(i.startsWith("on"))return o.instance[i]((function(e){n(e)}));"sendMessage"===i&&(i="send"),o.instance[i](t(t({},e),{success:function(e){n({result:e}),"close"===i&&W.delete(W.keys().next().value)},fail:function(e){r(e)}}))}else r({errMsg:"socketTask not exists."})}))};function D(e,t){if(e.isOpend)t({data:e.openData});else{var n=setInterval((function(){e.isOpend&&(clearInterval(n),t(e.openData))}),200);setTimeout((function(){clearInterval(n)}),2e3)}}var j=["stopRecord","getRecorderManager","pauseVoice","stopVoice","pauseBackgroundAudio","stopBackgroundAudio","getBackgroundAudioManager","createAudioContext","createInnerAudioContext","createVideoContext","createCameraContext","createMapContext","canIUse","startAccelerometer","stopAccelerometer","startCompass","stopCompass","hideToast","hideLoading","showNavigationBarLoading","hideNavigationBarLoading","navigateBack","createAnimation","pageScrollTo","createSelectorQuery","createCanvasContext","createContext","drawCanvas","hideKeyboard","stopPullDownRefresh","arrayBufferToBase64","base64ToArrayBuffer"],L=new Map,H=["onCompassChange","onThemeChange","onUserCaptureScreen","onWindowResize","onMemoryWarning","onAccelerometerChange","onKeyboardHeightChange","onNetworkStatusChange","onPushMessage","onLocationChange","onGetWifiList","onWifiConnected","onWifiConnectedWithPartialInfo","onSocketOpen","onSocketError","onSocketMessage","onSocketClose"],X={},V=/^\$|Sync$|Window$|WindowStyle$|sendHostEvent|sendNativeEvent|restoreGlobal|requireGlobal|getCurrentSubNVue|getMenuButtonBoundingClientRect|^report|interceptors|Interceptor$|getSubNVueById|requireNativePlugin|upx2px|hideKeyboard|canIUse|^create|Sync$|Manager$|base64ToArrayBuffer|arrayBufferToBase64|getLocale|setLocale|invokePushCallback|getWindowInfo|getDeviceInfo|getAppBaseInfo|getSystemSetting|getAppAuthorizeSetting|initUTS|requireUTS|registerUTS/,Y=/^on|^off/;function R(e){return V.test(e)||-1!==j.indexOf(e)}var F={getPageStack:function(){return Promise.resolve({pageStack:getCurrentPages().map((function(e){return P(h(e))}))})},getCurrentPage:function(){var e=getCurrentPages(),t=e.length;return new Promise((function(n,r){t?n(P(h(e[t-1]))):r(Error("getCurrentPages().length=0"))}))},callUniMethod:function(e,n){var r=e.method,o=e.args;return new Promise((function(e,i){if("connectSocket"!==r){var u,c;if(H.includes(r)){L.has(r)||L.set(r,new Map);var a=o[0],s=function(e){n({id:a,result:{method:r,data:e}})};return r.startsWith("onSocket")?B({method:r.replace("Socket","")}).then((function(e){return s(e)})).catch((function(e){return s(e)})):(L.get(r).set(a,s),uni[r](s)),e({result:null})}if(r.startsWith("off")&&H.includes(r.replace("off","on"))){var l=r.replace("off","on");if(L.has(l)){var f=o[0];if(void 0!==f){var d=L.get(l).get(f);uni[r](d),L.get(l).delete(f)}else{L.get(l).forEach((function(e){uni[r](e)})),L.delete(l)}}return e({result:null})}if(r.indexOf("Socket")>0)return B(t({method:r.replace("Socket","")},o[0])).then((function(t){return e(t)})).catch((function(e){return i(e)}));if(!uni[r])return i(Error("uni."+r+" not exists"));if(R(r))return e({result:uni[r].apply(uni,o)});var p=[Object.assign({},o[0]||{},{success:function(t){setTimeout((function(){e({result:t})}),"pageScrollTo"===r?350:0)},fail:function(e){i(Error(e.errMsg.replace(r+":fail ","")))}})];uni[r].apply(uni,p)}else(u=o[0].id,c=o[0].url,new Promise((function(e,t){var n=uni.connectSocket({url:c,success:function(){e({result:{errMsg:"connectSocket:ok"}})},fail:function(){t({result:{errMsg:"connectSocket:fail"}})}});W.set(u,{instance:n,isOpend:!1}),n.onOpen((function(e){W.get(u).isOpend=!0,W.get(u).openData=e}))}))).then((function(t){return e(t)})).catch((function(e){return i(e)}))}))},mockUniMethod:function(e){var t=e.method;if(!uni[t])throw Error("uni."+t+" not exists");if(!function(e){return!Y.test(e)}(t))throw Error("You can't mock uni."+t);var n,r=e.result,o=e.functionDeclaration;return i(r)&&i(o)?(X[t]&&(uni[t]=X[t],delete X[t]),Promise.resolve()):(n=i(o)?R(t)?function(){return r}:function(e){setTimeout((function(){r.errMsg&&-1!==r.errMsg.indexOf(":fail")?e.fail&&e.fail(r):e.success&&e.success(r),e.complete&&e.complete(r)}),4)}:function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return new Function("return "+o)().apply(n,t.concat(e.args))},n.origin=X[t]||uni[t],X[t]||(X[t]=uni[t]),uni[t]=n,Promise.resolve())},captureScreenshot:function(e){return new Promise((function(t,n){var r=getCurrentPages(),o=r.length;if(o){var i=h(r[o-1]);if(i)if("undefined"!=typeof UniElement)i.$viewToTempFilePath({id:e.id,offsetX:null!==e.offsetX?e.offsetX:"0",offsetY:null!==e.offsetY?e.offsetY:"0",wholeContent:1==e.fullPage,path:e.path||"screenshot",overwrite:!0,deviceShot:e.deviceShot,area:e.area,success:function(e){uni.getFileSystemManager().readFile({encoding:"base64",filePath:e.tempFilePath,success:function(e){t({data:e.data})},fail:function(e){n(Error("captureScreenshot fail: "+(e.message||e.errMsg)))}})},fail:function(e){n(Error("captureScreenshot fail: "+(e.message||e.errMsg)))}});else{if(void 0===(null===plus||void 0===plus?void 0:plus.nativeObj))return void n(Error("captureScreenshot fail: harmony does not support screenshot"));var u=i.$getAppWebview(),c=new plus.nativeObj.Bitmap("captureScreenshot","captureScreenshot.png");u.draw(c,(function(e){var n=c.toBase64Data().replace("data:image/png;base64,","").replace("data:image/(null);base64,","");c.clear(),t({data:n})}),(function(e){n(Error("captureScreenshot fail: "+e.message))}),{wholeContent:!!e.fullPage})}}else n(Error("getCurrentPage fail."))}))},socketEmitter:function(e){return new Promise((function(n,r){(function(e){return new Promise((function(n,r){if(W.has(e.id)){var o=W.get(e.id),i=o.instance,u=e.method,c=e.id;if("onOpen"==u)return D(o,n);if(u.startsWith("on"))return i[u]((function(e){n({method:"Socket."+u,id:c,data:e})}));i[u](t(t({},e),{success:function(t){n(t),"close"===u&&W.delete(e.id)},fail:function(e){r(e)}}))}else r({errMsg:"socketTask not exists."})}))})(e).then((function(e){return n(e)})).catch((function(e){return r(e)}))}))}},J=F,z={getData:function(e){return M(b(e.pageId),e.path)},setData:function(e){return A(b(e.pageId),e.data)},callMethod:function(e){var t,n=((t={})[r.VM_NOT_EXISTS]="Page["+e.pageId+"] not exists",t[r.METHOD_NOT_EXISTS]="page."+e.method+" not exists",t);return new Promise((function(t,r){k(b(e.pageId),e.method,e.args).then((function(e){return t(e)})).catch((function(e){r(Error(n[e]))}))}))},callMethodWithCallback:function(e){var t,n=((t={})[r.VM_NOT_EXISTS]="callMethodWithCallback:fail, Page["+e.pageId+"] not exists",t[r.METHOD_NOT_EXISTS]="callMethodWithCallback:fail, page."+e.method+" not exists",t),o=e.args[e.args.length-1];k(b(e.pageId),e.method,e.args).catch((function(e){o({errMsg:n[e]})}))}};function Q(e){return e.nodeId||e.elementId}var G={getData:function(e){return M(y()?I(e.pageId,e.elementId):O(e.pageId,Q(e)),e.path)},setData:function(e){return A(y()?I(e.pageId,e.elementId):O(e.pageId,Q(e)),e.data)},callMethod:function(e){var t,n=Q(e),o=((t={})[r.VM_NOT_EXISTS]="Component["+e.pageId+":"+n+"] not exists",t[r.METHOD_NOT_EXISTS]="component."+e.method+" not exists",t);return new Promise((function(t,r){k(y()?I(e.pageId,e.elementId):O(e.pageId,n),e.method,e.args).then((function(e){return t(e)})).catch((function(e){r(Error(o[e]))}))}))}};function K(e){var t=getCurrentPages().find((function(t){return _(t).id===e}));if(!t)throw Error("page["+e+"] not found");var n=t.$vm._$weex;return n.document.__$weex__||(n.document.__$weex__=n),n.document}var Z={},ee={};["text","image","input","textarea","video","web-view","slider"].forEach((function(e){Z[e]=!0,ee["u-"+e]=!0}));var te=["movable-view","picker","ad","button","checkbox-group","checkbox","form","icon","label","movable-area","navigator","picker-view-column","picker-view","progress","radio-group","radio","rich-text","u-slider","swiper-item","swiper","switch"],ne=te.map((function(e){return d(f(e))}));function re(e){var t=e.type;if(ee[t])return t.replace("u-","");var n=e.__vue__&&e.__vue__.$options.name;return"USlider"===n?"slider":n&&-1!==ne.indexOf(n)?s(n):t}function oe(e){var t={elementId:e.nodeId,tagName:re(e),nvue:!0},n=e.__vue__;return n&&!n.$options.isReserved&&(t.nodeId=n._uid),"video"===t.tagName&&(t.videoId=t.nodeId),t}function ie(e,t,n){for(var r=e.children,o=0;o<r.length;o++){var i=r[o];if(t(i)){if(!n)return i;n.push(i)}if(n)ie(i,t,n);else{var u=ie(i,t,n);if(u)return u}}return n}function ue(e,t,n){var r,o;if(0===t.indexOf("#")?(r=t.substr(1),o=function(e){return e.attr&&e.attr.id===r}):0===t.indexOf(".")&&(r=t.substr(1),o=function(e){return e.classList&&-1!==e.classList.indexOf(r)}),o){var i=ie(e,o,n);if(!i)throw Error("Node("+t+") not exists");return i}if("body"===t)return Object.assign({},e,{type:"page"});0===t.indexOf("uni-")&&(t=t.replace("uni-",""));var u=Z[t]?"u-"+t:t,c=-1!==te.indexOf(u)?d(f(u)):"",a=ie(e,(function(e){return e.type===u||c&&e.__vue__&&e.__vue__.$options.name===c}),n);if(!a)throw Error("Node("+t+") not exists");return a}var ce=[{test:function(e){return 2===e.length&&-1!==e.indexOf("document.documentElement.scrollWidth")&&-1!==e.indexOf("document.documentElement.scrollHeight")},call:function(e){var t=e.__$weex__||e.ownerDocument.__$weex__;return new Promise((function(n){"scroll-view"===e.type&&1===e.children.length&&(e=e.children[0]),t.requireModule("dom").getComponentRect(e.ref,(function(e){e.result?n([e.size.width,e.size.height]):n([0,0])}))}))}},{test:function(e){return 1===e.length&&"document.documentElement.scrollTop"===e[0]},call:function(e){var t=e.__$weex__||e.ownerDocument.__$weex__;return new Promise((function(n){"scroll-view"===e.type&&1===e.children.length&&(e=e.children[0]),t.requireModule("dom").getComponentRect(e.ref,(function(e){n([e.size&&Math.abs(e.size.top)||0])}))}))}},{test:function(e){return 2===e.length&&-1!==e.indexOf("offsetWidth")&&-1!==e.indexOf("offsetHeight")},call:function(e){var t=e.__$weex__||e.ownerDocument.__$weex__;return new Promise((function(n){t.requireModule("dom").getComponentRect(e.ref,(function(e){e.result?n([e.size.width,e.size.height]):n([0,0])}))}))}},{test:function(e,t){return 1===e.length&&"innerText"===e[0]},call:function(e){return Promise.resolve([ae(e,[]).join("")])}}];function ae(e,t){return"u-text"===e.type?t.push(e.attr.value):e.pureChildren.map((function(e){return ae(e,t)})),t}function se(e){return e.replace(/\n/g,"").replace(/<u-/g,"<").replace(/<\/u-/g,"</")}function le(e,t){return"outer"===t?"body"===e.role&&"scroll-view"===e.type?"<page>"+se(le(e,"inner"))+"</page>":se(e.toString()):se(e.pureChildren.map((function(e){return e.toString()})).join(""))}var fe={input:{input:function(e,t){e.setValue(t)}},textarea:{input:function(e,t){e.setValue(t)}},"scroll-view":{scrollTo:function(e,t,n){e.scrollTo(n)},scrollTop:function(e){return 0},scrollLeft:function(e){return 0},scrollWidth:function(e){return 0},scrollHeight:function(e){return 0}},swiper:{swipeTo:function(e,t){e.__vue__.current=t}},"movable-view":{moveTo:function(e,t,n){var r=e.__vue__;r.x=t,r.y=n}},switch:{tap:function(e){var t=e.__vue__;t.checked=!t.checked}},slider:{slideTo:function(e,t){e.__vue__.value=t}}};function de(e){return K(e).body}var pe={getWindow:function(e){return de(e)},getDocument:function(e){return de(e)},getEl:function(e,t){var n=K(t).getRef(e);if(!n)throw Error("element destroyed");return n},getOffset:function(e){var t=e.__$weex__||e.ownerDocument.__$weex__;return new Promise((function(n){t.requireModule("dom").getComponentRect(e.ref,(function(e){e.result?n({left:e.size.left,top:e.size.top}):n({left:0,top:0})}))}))},querySelector:function(e,t){return Promise.resolve(oe(ue(e,t)))},querySelectorAll:function(e,t){return Promise.resolve({elements:ue(e,t,[]).map((function(e){return oe(e)}))})},queryProperties:function(e,t){var n=ce.find((function(n){return n.test(t,e)}));return n?n.call(e).then((function(e){return{properties:e}})):Promise.resolve({properties:t.map((function(t){return v(e,t)}))})},queryAttributes:function(e,t){var n=e.attr;return Promise.resolve({attributes:t.map((function(t){return"class"===t?(e.classList||[]).join(" "):String(n[t]||n[f(t)]||"")}))})},queryStyles:function(e,t){var n=e.style;return Promise.resolve({styles:t.map((function(e){return n[e]}))})},queryHTML:function(e,t){return Promise.resolve({html:le(e,t)})},dispatchTapEvent:function(e){return e.fireEvent("click",{timeStamp:Date.now(),target:e,currentTarget:e},!0),Promise.resolve()},dispatchLongpressEvent:function(e){return e.fireEvent("longpress",{timeStamp:Date.now(),target:e,currentTarget:e},!0),Promise.resolve()},dispatchTouchEvent:function(e,t,n){return n||(n={}),n.touches||(n.touches=[]),n.changedTouches||(n.changedTouches=[]),n.touches.length||n.touches.push({identifier:Date.now(),target:e}),e.fireEvent(t,Object.assign({timeStamp:Date.now(),target:e,currentTarget:e},n),!0),Promise.resolve()},callFunction:function(e,t,r){var o=v(fe,t);return o?Promise.resolve({result:o.apply(null,n([e],r))}):Promise.reject(Error(t+" not exists"))},triggerEvent:function(e,t,n){var r=e.__vue__;return r?r.$trigger&&r.$trigger(t,{},n):e.fireEvent(t,{timeStamp:Date.now(),target:e,currentTarget:e},!1,{params:[{detail:n}]}),Promise.resolve()}};function ge(){return Object.assign({},function(e){return{"Page.getElement":function(t){return e.querySelector(e.getDocument(t.pageId),t.selector)},"Page.getElements":function(t){return e.querySelectorAll(e.getDocument(t.pageId),t.selector)},"Page.getWindowProperties":function(t){return e.queryProperties(e.getWindow(t.pageId),t.names)}}}(pe),function(e){var t=function(t){return e.getEl(t.elementId,t.pageId)};return{"Element.getElement":function(n){return e.querySelector(t(n),n.selector)},"Element.getElements":function(n){return e.querySelectorAll(t(n),n.selector)},"Element.getDOMProperties":function(n){return e.queryProperties(t(n),n.names)},"Element.getProperties":function(n){var r=t(n),o=r.__vue__||r.attr||{};return r.__vueParentComponent&&(o=Object.assign({},o,r.__vueParentComponent.attrs,r.__vueParentComponent.props)),e.queryProperties(o,n.names)},"Element.getOffset":function(n){return e.getOffset(t(n))},"Element.getAttributes":function(n){return e.queryAttributes(t(n),n.names)},"Element.getStyles":function(n){return e.queryStyles(t(n),n.names)},"Element.getHTML":function(n){return e.queryHTML(t(n),n.type)},"Element.tap":function(n){return e.dispatchTapEvent(t(n))},"Element.longpress":function(n){return e.dispatchLongpressEvent(t(n))},"Element.touchstart":function(n){return e.dispatchTouchEvent(t(n),"touchstart",n)},"Element.touchmove":function(n){return e.dispatchTouchEvent(t(n),"touchmove",n)},"Element.touchend":function(n){return e.dispatchTouchEvent(t(n),"touchend",n)},"Element.callFunction":function(n){return e.callFunction(t(n),n.functionName,n.args)},"Element.triggerEvent":function(n){return e.triggerEvent(t(n),n.type,n.detail)}}}(pe))}var ve=function(){};ve.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){var r=this;function o(){r.off(e,o),t.apply(n,arguments)}return o._=t,this.on(e,o,n)},emit:function(e){for(var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,o=n.length;r<o;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],o=[];if(r&&t){for(var i=r.length-1;i>=0;i--)if(r[i].fn===t||r[i].fn._===t){r.splice(i,1);break}o=r}return o.length?n[e]=o:delete n[e],this}};var me=ve;function he(e){var t=new me;return{subscribe:function(n,r,o){void 0===o&&(o=!1),t[o?"once":"on"](e+"."+n,r)},subscribeHandler:function(n,r,o){t.emit(e+"."+n,r,o)}}}var _e=Object.assign,Ee=_e(he("service"),{publishHandler:function(e,t,n){UniViewJSBridge.subscribeHandler(e,t,n)}}),ye=_e(he("view"),{publishHandler:function(e,t,n){UniServiceJSBridge.subscribeHandler(e,t,n)}});if("undefined"==typeof UniServiceJSBridge&&"undefined"==typeof UniViewJSBridge){var we="undefined"==typeof globalThis?Function("return this")():globalThis;we.UniServiceJSBridge=Ee,we.UniViewJSBridge=ye}var Te={};Object.keys(J).forEach((function(e){Te["App."+e]=J[e]})),Object.keys(z).forEach((function(e){Te["Page."+e]=z[e]})),Object.keys(G).forEach((function(e){Te["Element."+e]=G[e]}));var Se,Pe,be,xe=process.env.UNI_AUTOMATOR_WS_ENDPOINT;function $e(e){setTimeout((function(){be.send({data:JSON.stringify(e)})}),0)}function Oe(e){var t=JSON.parse(e.data),n=t.id,r=t.method,o=t.params,i={id:n},u=Te[r];if(!u){if(Pe){var c=Pe(n,r,o,i);if(!0===c)return;u=c}if(!u)return i.error={message:r+" unimplemented"},$e(i)}try{u(o,$e).then((function(e){e&&(i.result=e)})).catch((function(e){i.error={message:e.message}})).finally((function(){$e(i)}))}catch(e){i.error={message:e.message},$e(i)}}Pe=function(e,t,n,r){var o=n.pageId,i=function(e){var t=getCurrentPages();if(!e)return t[t.length-1];return t.find((function(t){return _(t).id===e}))}(o);return i?!_(i).meta.isNVue?(UniServiceJSBridge.publishHandler("sendAutoMessage",{id:e,method:t,params:n},o),!0):(Se||(Se=ge()),Se[t]):(r.error={message:"page["+o+"] not exists"},$e(r),!0)},UniServiceJSBridge.subscribe("onAutoMessageReceive",(function(e){$e(e)})),setTimeout((function(){if("undefined"!=typeof window&&(window.__uniapp_x_||window.__uniapp_x_postMessage))!function(e,t){var n,r=0;t&&(r=q++,U[r]=t);var o={data:{id:r,type:"automator",data:e}};console.log("postMessageToUniXWebView",o),(null===(n=null===window||void 0===window?void 0:window.__uniapp_x_)||void 0===n?void 0:n.postMessage)?window.__uniapp_x_.postMessage(JSON.stringify(o)):(null===window||void 0===window?void 0:window.__uniapp_x_postMessage)&&window.__uniapp_x_postMessage({data:o})}({action:"ready"});else{if(xe&&xe.endsWith(":0000"))return;void 0===e&&(e={}),(be=uni.connectSocket({url:e.wsEndpoint||xe,complete:function(){}})).onMessage(Oe),be.onOpen((function(t){e.success&&e.success(),console.log("已开启自动化测试...")})),be.onError((function(e){console.log("automator.onError",e)})),be.onClose((function(){e.fail&&e.fail({errMsg:"$$initRuntimeAutomator:fail"}),console.log("automator.onClose")}))}var e}),500);var Ie=Object.prototype.hasOwnProperty,Me=Array.isArray,Ce=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g;function Ae(e,t){if(Me(e))return e;if(t&&(n=t,r=e,Ie.call(n,r)))return[e];var n,r,o=[];return e.replace(Ce,(function(e,t,n,r){return o.push(n?r.replace(/\\(\\)?/g,"$1"):t||e),r})),o}function ke(e){return"TEXT"===e.tagName||"TEXTAREA"===e.tagName}function Ne(e){var t="";return(e.childNodes||e.children).forEach((function(e){ke(e)?t+=e.value:t+=Ne(e)})),t}function qe(e){return e.startsWith("uni-")?e.replace("uni-",""):e}function Ue(e,t){var n,r,o,i=(n=e,r=getCurrentPages(),o=null,r.forEach((function(e){(function(e){return e.$nativePage.pageId})(e.vm)==n&&(o=e)})),o);return null==i?"Page["+e+"] not exists":i.getNodeById(t)||"element["+t+"] not exists"}function We(e){var t,n,r,o;if(null==e)return null;var i={elementId:e.getNodeId(),tagName:e.tagName.toLocaleLowerCase().replace("uni-","")},u=y(),c=u?null===(t=UniVueElement.findVmByElement(e))||void 0===t?void 0:t.$:e.__vueParentComponent;return c&&(u&&c.uid?i.nodeId=c.uid:(null===(n=c.ctx)||void 0===n?void 0:n.$el)!==e||(null===(o=null===(r=c.proxy)||void 0===r?void 0:r.$options)||void 0===o?void 0:o.rootElement)||(i.nodeId=function(e){if(e._$weex)return e._uid;if(e._$id)return e._$id;if(e.uid)return e.uid;var t=function(e){for(var t=e.$parent;t;){if(t._$id)return t;t=t.$parent}}(e);if(!e.$parent)return"-1";var n=e.$vnode,r=n.context;return r&&r!==t&&r._$id?r._$id+";"+t._$id+","+n.data.attrs._i:t._$id+","+n.data.attrs._i}(c))),"video"===i.tagName&&(i.videoId=i.nodeId),i}var Be={input:{input:function(e,t){var n=new UniInputEvent("input",{detail:{value:t}});n.detail.value=t,e.dispatchEvent("input",n)}},textarea:{input:function(e,t){var n=new UniInputEvent("input",{detail:{value:t}});n.detail.value=t,e.dispatchEvent("input",n)}},"scroll-view":{scrollTo:function(e,t,n){e.scrollLeft=t,e.scrollTop=n},scrollTop:function(e){return e.scrollTop},scrollLeft:function(e){return e.scrollLeft},scrollWidth:function(e){return e.scrollWidth},scrollHeight:function(e){return e.scrollHeight}},swiper:{swipeTo:function(e,t){e.setAttribute("current",t)}},"movable-view":{moveTo:function(e,t,n){e.__vue__._animationTo(t,n)}},switch:{tap:function(e){e.click()}},slider:{slideTo:function(e,t){e.setAttribute("value",t)}}};function De(e){var t=getCurrentPages().find((function(t){return _(t).id===e}));if(!t)throw Error("page["+e+"] not found");return h(t).$el.parentElement}function je(e){var t=getCurrentPages().find((function(t){return _(t).id===e}));if(!t)throw Error("page["+e+"] not found");return t}function Le(e){return e.map((function(e){var t=new UniTouch;return t.identifier=e.identifier,t.pageX=e.pageX,t.pageY=e.pageY,e.screenX&&(t.screenX=e.screenX),e.screenY&&(t.screenY=e.screenY),e.clientX&&(t.clientX=e.clientX),e.clientY&&(t.clientY=e.clientY),t}))}var He={getWindow:function(e){var t=De(e);return 1===t.childNodes.length?t.childNodes[0]:t},getDocument:function(e){return De(e)},getEl:function(e,t){var n=Ue(t,e);if("string"==typeof n)throw Error(n);return n},getOffset:function(e){return Promise.resolve({left:e.offsetLeft,top:e.offsetTop})},querySelector:function(e,t){"page"===(t=qe(t))&&(t="body");var n=je(e);return n?Promise.resolve(We(n.querySelector(t))):Promise.reject("page "+e+" not found")},elementQuerySelector:function(e,t){return t=qe(t),Promise.resolve(We(e.querySelector(t)))},querySelectorAll:function(e,t){t=qe(t);var n=je(e);if(n){var r=[],o=n.querySelectorAll(t);return[].forEach.call(o,(function(e){try{r.push(We(e))}catch(e){}})),Promise.resolve({elements:r})}return Promise.reject("page "+e+" not found")},elementQuerySelectorAll:function(e,t){t=qe(t);var n=[],r=e.querySelectorAll(t);return[].forEach.call(r,(function(e){try{n.push(We(e))}catch(e){}})),Promise.resolve({elements:n})},queryProperties:function(e,t){return Promise.resolve({properties:t.map((function(t){return"innerText"==t?ke(e)?e.value:Ne(e):"value"==t?e.getAnyAttribute("value"):"offsetWidth"==t?e.offsetWidth:"offsetHeight"==t?e.offsetHeight:"document.documentElement.scrollWidth"===t?e.scrollWidth:"document.documentElement.scrollHeight"===t?e.scrollHeight:"document.documentElement.scrollTop"===t?e.scrollTop:e.getAttribute(t)||e[t]||"Element.getDOMProperties not support "+t}))})},queryAttributes:function(e,t){return Promise.resolve({attributes:t.map((function(t){return String(e.getAnyAttribute(t))}))})},queryStyles:function(e,t){var n=e.style;return Promise.resolve({styles:t.map((function(e){return n.getPropertyValue(e)}))})},queryHTML:function(e,t){return Promise.resolve({html:(n="outer"===t?e.outerHTML:e.innerHTML,n.replace(/\n/g,"").replace(/(<uni-text[^>]*>)(<span[^>]*>[^<]*<\/span>)(.*?<\/uni-text>)/g,"$1$3").replace(/<\/?[^>]*>/g,(function(e){return-1<e.indexOf("<body")?"<page>":"</body>"===e?"</page>":0!==e.indexOf("<uni-")&&0!==e.indexOf("</uni-")?"":e.replace(/uni-/g,"").replace(/ role=""/g,"").replace(/ aria-label=""/g,"")})))});var n},dispatchTapEvent:function(e){return e.testClick?e.testClick({}):e.dispatchEvent("click",new UniPointerEvent("click",0,0,0,0,0,0,0,0)),Promise.resolve()},dispatchLongpressEvent:function(e){return this.dispatchTouchEvent(e,"longpress",{touches:[{identifier:1,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0}],changedTouches:[{identifier:1,pageX:0,pageY:0,clientX:0,clientY:0,screenX:0,screenY:0}]}),Promise.resolve()},dispatchTouchEvent:function(e,t,n){n||(n={}),n.touches||(n.touches=[]),n.changedTouches||(n.changedTouches=[]),n.touches.length||n.touches.push({identifier:Date.now(),target:e});var r=Le(n.touches),o=Le(n.changedTouches);return e.dispatchEvent(t,new UniTouchEvent(t,r,o)),Promise.resolve()},callFunction:function(e,t,r){var o=function(e,t){var n,r=Ae(t,e);for(n=r.shift();null!=n;){if(null==(e=e[n]))return;n=r.shift()}return e}(Be,t);return o?Promise.resolve({result:o.apply(null,n([e],r))}):Promise.reject(Error(t+" not exists"))},triggerEvent:function(e,t,n){return function(e,t,n){var r={input:{input:UniInputEvent,focus:UniInputFocusEvent,blur:UniInputBlurEvent},textarea:{input:UniInputEvent},"scroll-view":{scroll:UniScrollEvent,scrollend:UniScrollEvent,scrolltoupper:UniScrollToUpperEvent,scrolltolower:UniScrollToLowerEvent}},o=e.tagName.toLocaleLowerCase();if(r[o]&&r[o][t]){var i=new(0,r[o][t])(t,{detail:n});return n&&Object.assign(i,{detail:n}),Promise.resolve(e.dispatchEvent(t,i))}return Promise.reject(Error(o+" component "+t+" event not exists"))}(e,t,n)},callContextMethod:function(e,t,n){return e[t]?Promise.resolve(e[t].apply(e,n)):Promise.reject(Error(t+" method not exists"))}};var Xe=Object.assign({},function(e){return{"Page.getElement":function(t){return e.querySelector(t.pageId,t.selector)},"Page.getElements":function(t){return e.querySelectorAll(t.pageId,t.selector)},"Page.getWindowProperties":function(t){return e.queryProperties(e.getWindow(t.pageId),t.names)}}}(He),function(e){var t=function(t){return e.getEl(t.elementId,t.pageId)};return{"Element.getElement":function(n){return e.elementQuerySelector(t(n),n.selector)},"Element.getElements":function(n){return e.elementQuerySelectorAll(t(n),n.selector)},"Element.getDOMProperties":function(n){return e.queryProperties(t(n),n.names)},"Element.getProperties":function(n){var r=t(n);return e.queryProperties(r,n.names)},"Element.getOffset":function(n){return e.getOffset(t(n))},"Element.getAttributes":function(n){return e.queryAttributes(t(n),n.names)},"Element.getStyles":function(n){return e.queryStyles(t(n),n.names)},"Element.getHTML":function(n){return e.queryHTML(t(n),n.type)},"Element.tap":function(n){return e.dispatchTapEvent(t(n))},"Element.longpress":function(n){return e.dispatchLongpressEvent(t(n))},"Element.touchstart":function(n){return e.dispatchTouchEvent(t(n),"touchstart",n)},"Element.touchmove":function(n){return e.dispatchTouchEvent(t(n),"touchmove",n)},"Element.touchend":function(n){return e.dispatchTouchEvent(t(n),"touchend",n)},"Element.callFunction":function(n){return e.callFunction(t(n),n.functionName,n.args)},"Element.triggerEvent":function(n){return e.triggerEvent(t(n),n.type,n.detail)},"Element.callContextMethod":function(n){return e.callContextMethod(t(n),n.method,n.args)}}}(He));function Ve(e){return UniViewJSBridge.publishHandler("onAutoMessageReceive",e)}UniViewJSBridge.subscribe("sendAutoMessage",(function(e){var t=e.id,n=e.method,r=e.params,o={id:t};if("ping"==n)return o.result="pong",void Ve(o);var i=Xe[n];if(!i)return o.error={message:n+" unimplemented"},Ve(o);try{i(r).then((function(e){e&&(o.result=e)})).catch((function(e){o.error={message:e.message}})).finally((function(){Ve(o)}))}catch(e){o.error={message:e.message},Ve(o)}}));
